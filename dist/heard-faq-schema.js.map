{
  "version": 3,
  "sources": ["../src/faq-schema/index.ts"],
  "sourcesContent": ["/**\n * FAQ Schema Generator\n * Automatically generates JSON-LD FAQ schema from FAQ sections on the page\n */\n\ninterface FAQItem {\n  question: string;\n  answer: string;\n}\n\n/**\n * Extract FAQs from the document by finding FAQ row elements directly\n */\nfunction extractFAQs(): FAQItem[] {\n  const faqs: FAQItem[] = [];\n  \n  // Find all FAQ rows (accordion items) directly by their classes\n  // This is more reliable than looking for a specific section wrapper\n  const faqRows = document.querySelectorAll('.pricing-faq_row, .acc-item');\n  \n  faqRows.forEach(row => {\n    // Find the question (h5 heading)\n    const questionElement = row.querySelector('h5.heading-xsmall, .pricing-faq_question h5, .acc-head h5');\n    \n    // Find the answer (paragraph in acc-body)\n    const answerElement = row.querySelector('.acc-body p, .pricing-faq_row p.text-size-regular');\n    \n    if (questionElement && answerElement) {\n      const question = questionElement.textContent?.trim() || '';\n      // Get all text content from the answer, handling line breaks and links\n      let answer = answerElement.textContent?.trim() || '';\n      \n      // If answer is empty, try to get innerHTML and clean it up\n      if (!answer && answerElement.innerHTML) {\n        // Create a temporary element to get clean text\n        const temp = document.createElement('div');\n        temp.innerHTML = answerElement.innerHTML;\n        // Replace <br> with spaces and clean up\n        answer = temp.textContent?.trim().replace(/\\s+/g, ' ') || '';\n      }\n      \n      if (question && answer) {\n        faqs.push({ question, answer });\n      }\n    }\n  });\n  \n  return faqs;\n}\n\n/**\n * Generate JSON-LD FAQ schema from FAQ items\n */\nfunction generateFAQSchema(faqs: FAQItem[]): object {\n  return {\n    '@context': 'https://schema.org',\n    '@type': 'FAQPage',\n    mainEntity: faqs.map(faq => ({\n      '@type': 'Question',\n      name: faq.question,\n      acceptedAnswer: {\n        '@type': 'Answer',\n        text: faq.answer\n      }\n    }))\n  };\n}\n\n/**\n * Inject JSON-LD schema into the page\n */\nfunction injectSchema(schema: object): void {\n  // Remove existing FAQ schema if present\n  const existingScript = document.querySelector('script[type=\"application/ld+json\"][data-heard-faq-schema]');\n  if (existingScript) {\n    existingScript.remove();\n  }\n  \n  // Create new script element\n  const script = document.createElement('script');\n  script.type = 'application/ld+json';\n  script.setAttribute('data-heard-faq-schema', 'true');\n  script.textContent = JSON.stringify(schema, null, 2);\n  \n  // Insert into head\n  document.head.appendChild(script);\n}\n\n/**\n * Initialize FAQ schema generation\n */\nfunction init(): void {\n  try {\n    // Extract FAQs directly by finding FAQ row elements\n    // This searches for .pricing-faq_row or .acc-item classes anywhere on the page\n    const faqs = extractFAQs();\n    \n    if (faqs.length === 0) {\n      console.warn('[Heard FAQ Schema] No FAQs found. Looking for elements with classes .pricing-faq_row or .acc-item containing h5 questions and .acc-body answers.');\n      return;\n    }\n    \n    // Generate schema\n    const schema = generateFAQSchema(faqs);\n    \n    // Inject into page\n    injectSchema(schema);\n    \n    console.log(`[Heard FAQ Schema] Generated schema for ${faqs.length} FAQ(s)`);\n  } catch (error) {\n    console.error('[Heard FAQ Schema] Error generating schema:', error);\n  }\n}\n\n// Initialize when DOM is ready\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', init);\n} else {\n  // DOM is already ready\n  init();\n}\n"],
  "mappings": ";;;;AAaA,WAAS,cAAyB;AAChC,UAAM,OAAkB,CAAC;AAIzB,UAAM,UAAU,SAAS,iBAAiB,6BAA6B;AAEvE,YAAQ,QAAQ,SAAO;AAErB,YAAM,kBAAkB,IAAI,cAAc,2DAA2D;AAGrG,YAAM,gBAAgB,IAAI,cAAc,mDAAmD;AAE3F,UAAI,mBAAmB,eAAe;AACpC,cAAM,WAAW,gBAAgB,aAAa,KAAK,KAAK;AAExD,YAAI,SAAS,cAAc,aAAa,KAAK,KAAK;AAGlD,YAAI,CAAC,UAAU,cAAc,WAAW;AAEtC,gBAAM,OAAO,SAAS,cAAc,KAAK;AACzC,eAAK,YAAY,cAAc;AAE/B,mBAAS,KAAK,aAAa,KAAK,EAAE,QAAQ,QAAQ,GAAG,KAAK;AAAA,QAC5D;AAEA,YAAI,YAAY,QAAQ;AACtB,eAAK,KAAK,EAAE,UAAU,OAAO,CAAC;AAAA,QAChC;AAAA,MACF;AAAA,IACF,CAAC;AAED,WAAO;AAAA,EACT;AAKA,WAAS,kBAAkB,MAAyB;AAClD,WAAO;AAAA,MACL,YAAY;AAAA,MACZ,SAAS;AAAA,MACT,YAAY,KAAK,IAAI,UAAQ;AAAA,QAC3B,SAAS;AAAA,QACT,MAAM,IAAI;AAAA,QACV,gBAAgB;AAAA,UACd,SAAS;AAAA,UACT,MAAM,IAAI;AAAA,QACZ;AAAA,MACF,EAAE;AAAA,IACJ;AAAA,EACF;AAKA,WAAS,aAAa,QAAsB;AAE1C,UAAM,iBAAiB,SAAS,cAAc,2DAA2D;AACzG,QAAI,gBAAgB;AAClB,qBAAe,OAAO;AAAA,IACxB;AAGA,UAAM,SAAS,SAAS,cAAc,QAAQ;AAC9C,WAAO,OAAO;AACd,WAAO,aAAa,yBAAyB,MAAM;AACnD,WAAO,cAAc,KAAK,UAAU,QAAQ,MAAM,CAAC;AAGnD,aAAS,KAAK,YAAY,MAAM;AAAA,EAClC;AAKA,WAAS,OAAa;AACpB,QAAI;AAGF,YAAM,OAAO,YAAY;AAEzB,UAAI,KAAK,WAAW,GAAG;AACrB,gBAAQ,KAAK,kJAAkJ;AAC/J;AAAA,MACF;AAGA,YAAM,SAAS,kBAAkB,IAAI;AAGrC,mBAAa,MAAM;AAEnB,cAAQ,IAAI,2CAA2C,KAAK,MAAM,SAAS;AAAA,IAC7E,SAAS,OAAO;AACd,cAAQ,MAAM,+CAA+C,KAAK;AAAA,IACpE;AAAA,EACF;AAGA,MAAI,SAAS,eAAe,WAAW;AACrC,aAAS,iBAAiB,oBAAoB,IAAI;AAAA,EACpD,OAAO;AAEL,SAAK;AAAA,EACP;",
  "names": []
}
